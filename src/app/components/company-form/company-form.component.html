<form class="w-100" (ngSubmit)="submit()" [formGroup]="userForm" #formDir="ngForm">
    <h1 class="mb-3 fw-bold">Cadastro de uma Empresa</h1>

    <!-- Nome e CPF -->
    <div class="d-flex justify-content-between mb-3">
        <div class="form-floating w-50 pe-2">
            <input type="text" class="form-control" id="floatingNome" placeholder="seunome" formControlName="name">
            <label for="floatingNome">Nome</label>
            <!-- Mensagem de erro abaixo do campo Nome -->
            <div class="validation-error" *ngIf="userForm.controls['name'].invalid && formDir.submitted">
                <p>Este campo é obrigatório!</p>
            </div>
        </div>
        <div class="form-floating w-50 ps-2">
            <input type="text" class="form-control" id="floatingCpf" placeholder="cnpj" formControlName="cnpj">
            <label for="floatingCpf">CNPJ</label>
            <!-- Mensagem de erro abaixo do campo CPF -->
            <div class="validation-error" *ngIf="userForm.controls['cnpj'].invalid && formDir.submitted">
                <p>Este campo é obrigatório!</p>
            </div>
        </div>
    </div>


    <!-- E-mail e Telefone -->
    <div class="d-flex justify-content-between mb-3">
        <div class="form-floating w-50 pe-2">
            <input type="email" class="form-control" id="floatingEmail" placeholder="seu-email@gmail.com" formControlName="email">
            <label for="floatingEmail">E-mail</label>
            <!-- Mensagem de erro abaixo do campo Nome -->
            <div class="validation-error" *ngIf="userForm.controls['email'].invalid && formDir.submitted">
                <p>Este campo é obrigatório!</p>
            </div>
        </div>
        <div class="form-floating w-50 ps-2">
            <input type="text" class="form-control" id="floatingTelefone" placeholder="(11)11111-1111" formControlName="phone_number">
            <label for="floatingTelefone">Telefone</label>
            <!-- Mensagem de erro abaixo do campo Nome -->
            <div class="validation-error" *ngIf="userForm.controls['phone_number'].invalid && formDir.submitted">
                <p>Este campo é obrigatório!</p>
            </div>
        </div>
    </div>

    <!-- Agora o endereço é um FormArray: -->
    <div formArrayName="addresses">

    <div *ngFor="let addr of addresses.controls; let i = index" [formGroupName]="i" class="address-block mb-4 border p-3 rounded">

        <!-- Rua e Número -->
        <div class="d-flex justify-content-between mb-3">
        <div class="form-floating w-75 pe-2">
            <input type="text" class="form-control" placeholder="Rua" formControlName="address" id="address-{{i}}">
            <label for="address-{{i}}">Rua</label>
            <div class="validation-error" *ngIf="addr.get('address')?.invalid && formDir.submitted">
            <p>Este campo é obrigatório!</p>
            </div>
        </div>

        <div class="form-floating w-25 ps-2 pe-2">
            <input type="text" class="form-control" placeholder="Número" formControlName="home_number" id="home_number-{{i}}">
            <label for="home_number-{{i}}">Número</label>
            <div class="validation-error" *ngIf="addr.get('home_number')?.invalid && formDir.submitted">
            <p>Este campo é obrigatório!</p>
            </div>
        </div>
        </div>

        <!-- Complemento -->
        <div class="form-floating mb-3">
        <input type="text" class="form-control" placeholder="Complemento" formControlName="complement" id="complement-{{i}}">
        <label for="complement-{{i}}">Complemento</label>
        <div class="validation-error" *ngIf="addr.get('complement')?.invalid && formDir.submitted">
            <p>Este campo é obrigatório!</p>
        </div>
        </div>

        <!-- Bairro e CEP -->
        <div class="d-flex justify-content-between mb-3">
        <div class="form-floating w-75 pe-2">
            <input type="text" class="form-control" placeholder="Bairro" formControlName="district" id="district-{{i}}">
            <label for="district-{{i}}">Bairro</label>
            <div class="validation-error" *ngIf="addr.get('district')?.invalid && formDir.submitted">
            <p>Este campo é obrigatório!</p>
            </div>
        </div>

        <div class="form-floating w-25 ps-2">
            <input type="text" class="form-control" placeholder="CEP" formControlName="cep" id="cep-{{i}}">
            <label for="cep-{{i}}">CEP</label>
            <div class="validation-error" *ngIf="addr.get('cep')?.invalid && formDir.submitted">
            <p>Este campo é obrigatório!</p>
            </div>
        </div>
        </div>

        <!-- Cidade e Estado -->
        <div class="d-flex mb-3">
        <div class="form-floating w-50 pe-2">
            <input type="text" class="form-control" placeholder="Cidade" formControlName="city" id="city-{{i}}">
            <label for="city-{{i}}">Cidade</label>
            <div class="validation-error" *ngIf="addr.get('city')?.invalid && formDir.submitted">
            <p>Este campo é obrigatório!</p>
            </div>
        </div>

        <div class="form-floating w-25 ps-2">
            <input type="text" class="form-control" placeholder="Estado" formControlName="uf" id="uf-{{i}}">
            <label for="uf-{{i}}">Estado</label>
            <div class="validation-error" *ngIf="addr.get('uf')?.invalid && formDir.submitted">
            <p>Este campo é obrigatório!</p>
            </div>
        </div>
        </div>

        <!-- Botão para remover endereço -->
        <button type="button" class="btn btn-danger mb-3" (click)="removeAddress(i)" *ngIf="addresses.length > 1">Remover endereço</button>
    </div>

    <!-- Botão para adicionar novo endereço -->
    <button type="button" class="btn btn-secondary mb-4" (click)="addAddress()">Adicionar endereço</button>
    </div>
    
    <!-- Botão -->
    <!-- <button class="btn custom-btn w-100 py-2" type="submit"></button> -->
     <input type="submit" value="{{ btnText }}" class="btn custom-btn w-100 py-2">
</form>